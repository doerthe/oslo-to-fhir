@prefix list: <http://www.w3.org/2000/10/swap/list#> .
@prefix log: <http://www.w3.org/2000/10/swap/log#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dc: <http://purl.org/dc/terms/> .
@prefix schema: <http://schema.org/> .
@prefix prov: <http://www.w3.org/ns/prov#> .
@prefix person: <http://www.w3.org/ns/person#> .
@prefix locn: <http://www.w3.org/ns/locn#> .
@prefix vp: <https://data.vlaanderen.be/ns/persoon#>.
@prefix va: <https://data.vlaanderen.be/ns/adres#>.
@prefix : <http://example.org/>.
@prefix func: <http://www.w3.org/2007/rif-builtin-function#>.
@prefix fhir: <http://hl7.org/fhir/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix string: <http://www.w3.org/2000/10/swap/string#>.
@prefix foaf: <http://xmlns.com/foaf/0.1/>.
@prefix conv: <http://da.org/ns/conv#>.
@prefix skos: <http://www.w3.org/2004/02/skos/core#>.

base <http://example.org/>

:pieter2 a person:Person , schema:Person . # , fhir:Patient .

:pieter a person:Person , schema:Person, fhir:Patient ;

    vp:heeftPersoonsrelatie [
        a vp:Afstamming ;
        vp:afstammingsType "http://data.vlaanderen.be/concept/AfstammingsType/WettigKind"^^skos:Concept ;
        vp:datumVanAfstamming "1908-07-04T00:00:00.000"^^<http://www.w3.org/2001/XMLSchema#dateTime> ;
        vp:isRelatieMet "https://data.vlaanderen.be/id/geregistreerdpersoon/00000100000"^^person:Person
    ] .



{ ?x a person:Person .
  ?x vp:heeftPersoonsrelatie ?r

} => { 
    << <> dc:subject ?x >> conv:reason conv:subjectOfPersonalRelationship
} .

{ ?x a fhir:Patient 

} => {
  	<< <> dc:subject ?x >> conv:reason conv:taggedAsPatient
} .

{ 
 (?person { ?person a person:Person } ?persons) log:collectAllIn _:x .

 ?persons list:length 1 .
 ?persons list:member ?x
                                                                 
} => {
    << <> dc:subject ?x >> conv:reason conv:onlyPersonInPod
} .